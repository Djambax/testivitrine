---
// Page Contact Moderne - contact.astro
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const moyensContact = [
  {
    type: "Email",
    valeur: "contact@nova-imperia.fr",
    icone: "mail",
    link: "mailto:contact@nova-imperia.fr",
    description: "Réponse sous 24h garantie"
  },
  {
    type: "Téléphone",
    valeur: "+33 1 23 45 67 89",
    icone: "phone",
    link: "tel:+33123456789",
    description: "Du lundi au vendredi, 9h-18h"
  },
  {
    type: "WhatsApp",
    valeur: "+33 6 12 34 56 78",
    icone: "message-circle",
    link: "https://wa.me/33612345678",
    description: "Réponse rapide 7j/7"
  },
  {
    type: "LinkedIn",
    valeur: "Nova Impéria",
    icone: "linkedin",
    link: "https://linkedin.com/company/nova-imperia",
    description: "Suivez notre actualité"
  }
];

const horaires = [
  { jour: "Lundi - Vendredi", heures: "9h00 - 18h00" },
  { jour: "Samedi", heures: "10h00 - 16h00" },
  { jour: "Dimanche", heures: "Fermé" }
];

const faqItems = [
  {
    question: "Combien de temps pour avoir une réponse ?",
    reponse: "Nous nous engageons à répondre à toute demande sous 24h maximum. Pour les demandes urgentes, contactez-nous par téléphone."
  },
  {
    question: "Les devis sont-ils gratuits ?",
    reponse: "Oui, tous nos devis sont gratuits et sans engagement. Nous étudions votre projet en détail pour vous proposer une solution adaptée."
  },
  {
    question: "Proposez-vous des formations sur mesure ?",
    reponse: "Absolument ! Nous concevons des programmes de formation personnalisés selon vos objectifs, votre secteur et votre niveau."
  },
  {
    question: "Quels sont vos modes de paiement ?",
    reponse: "Nous acceptons les virements bancaires, chèques, et proposons des facilités de paiement en plusieurs fois selon les montants."
  }
];
---

<Layout title="Contact - Réservez votre accompagnement | NOVA IMPÉRIA">
  <Header />
  
  <!-- Hero Section -->
  <section class="relative pt-24 pb-16 bg-gradient-to-br from-gray-50 via-white to-blue-50 overflow-hidden">
    <!-- Animated Background -->
    <div class="absolute inset-0 opacity-20">
      <div class="absolute top-10 left-10 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl animate-blob"></div>
      <div class="absolute top-10 right-10 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"></div>
    </div>
    
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center animate-fade-in">
        <div class="inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full border border-gray-200 mb-8">
          <i data-lucide="headphones" class="w-5 h-5 text-blue-500"></i>
          <span class="text-sm font-medium text-gray-700">Support Premium</span>
        </div>
        
        <h1 class="text-4xl lg:text-6xl font-bold text-gray-900 mb-6 font-accent">
          Contactez <span class="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">NOVA IMPÉRIA</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8 leading-relaxed">
          Une question, un projet de formation ? Notre équipe d'experts est à votre écoute pour vous accompagner 
          dans la réalisation de vos ambitions professionnelles.
        </p>
        
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-2xl p-6 max-w-2xl mx-auto">
          <div class="flex items-center justify-center gap-4 text-blue-800">
            <i data-lucide="clock" class="w-5 h-5"></i>
            <span class="font-medium">Réponse garantie sous 24h</span>
            <span class="text-blue-400">•</span>
            <i data-lucide="shield-check" class="w-5 h-5"></i>
            <span class="font-medium">Devis gratuit et sans engagement</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact & Formulaire -->
  <section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
        
        <!-- Formulaire de contact multi-étapes -->
        <div class="animate-fade-in">
          <div class="glass p-8 rounded-2xl border border-white/20">
            <h2 class="text-3xl font-bold text-gray-900 mb-2 font-accent">Parlons de votre projet</h2>
            <p class="text-gray-600 mb-8">
              Un formulaire intelligent en 4 étapes pour mieux comprendre vos besoins
            </p>
            
            <!-- Progress indicator -->
            <div class="mb-8">
              <div class="flex items-center justify-between mb-4">
                <span class="text-sm font-medium text-gray-500">Étape <span id="current-step">1</span> sur 4</span>
                <span class="text-sm font-medium text-gray-500"><span id="progress-percent">25</span>%</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progress-bar" class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-500" style="width: 25%"></div>
              </div>
            </div>
            
            <form class="space-y-6" id="multiStepForm">
              <!-- Step 1: Service Selection -->
              <div class="form-step active" id="step-1">
                <div class="text-center mb-8">
                  <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="target" class="w-8 h-8 text-white"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-900 mb-2 font-accent">Sélectionnez votre besoin</h3>
                  <p class="text-gray-600">Choisissez le type d'accompagnement qui vous intéresse</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <label class="service-card cursor-pointer">
                    <input type="radio" name="service_type" value="coaching" class="sr-only" required />
                    <div class="card p-6 text-center transition-all duration-300 border-2 border-transparent">
                      <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="user-check" class="w-6 h-6 text-white"></i>
                      </div>
                      <h4 class="font-bold text-gray-900 mb-2">Coaching Individuel</h4>
                      <p class="text-sm text-gray-600">Accompagnement personnalisé 1:1</p>
                      <div class="text-blue-600 font-medium text-sm mt-2">À partir de 150€</div>
                    </div>
                  </label>
                  
                  <label class="service-card cursor-pointer">
                    <input type="radio" name="service_type" value="formation" class="sr-only" required />
                    <div class="card p-6 text-center transition-all duration-300 border-2 border-transparent">
                      <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="graduation-cap" class="w-6 h-6 text-white"></i>
                      </div>
                      <h4 class="font-bold text-gray-900 mb-2">Formation</h4>
                      <p class="text-sm text-gray-600">Programmes de formation spécialisés</p>
                      <div class="text-green-600 font-medium text-sm mt-2">Variables selon programme</div>
                    </div>
                  </label>
                  
                  <label class="service-card cursor-pointer">
                    <input type="radio" name="service_type" value="consulting" class="sr-only" required />
                    <div class="card p-6 text-center transition-all duration-300 border-2 border-transparent">
                      <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="briefcase" class="w-6 h-6 text-white"></i>
                      </div>
                      <h4 class="font-bold text-gray-900 mb-2">Consulting</h4>
                      <p class="text-sm text-gray-600">Conseil stratégique et accompagnement</p>
                      <div class="text-purple-600 font-medium text-sm mt-2">Sur devis</div>
                    </div>
                  </label>
                  
                  <label class="service-card cursor-pointer">
                    <input type="radio" name="service_type" value="autre" class="sr-only" required />
                    <div class="card p-6 text-center transition-all duration-300 border-2 border-transparent">
                      <div class="w-12 h-12 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="help-circle" class="w-6 h-6 text-white"></i>
                      </div>
                      <h4 class="font-bold text-gray-900 mb-2">Autre demande</h4>
                      <p class="text-sm text-gray-600">Partenariat, média, autres projets</p>
                      <div class="text-amber-600 font-medium text-sm mt-2">À discuter</div>
                    </div>
                  </label>
                </div>
              </div>

              <!-- Step 2: Personal Information -->
              <div class="form-step" id="step-2">
                <div class="text-center mb-8">
                  <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="user" class="w-8 h-8 text-white"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-900 mb-2 font-accent">Vos informations</h3>
                  <p class="text-gray-600">Aidez-nous à mieux vous connaître</p>
                </div>
                
                <div class="space-y-6">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label for="prenom" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>Prénom *
                      </label>
                      <input 
                        type="text" 
                        id="prenom"
                        name="prenom"
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="Votre prénom"
                      />
                    </div>
                    <div>
                      <label for="nom" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>Nom *
                      </label>
                      <input 
                        type="text" 
                        id="nom"
                        name="nom"
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="Votre nom"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="mail" class="w-4 h-4 inline mr-2"></i>Email *
                      </label>
                      <input 
                        type="email" 
                        id="email"
                        name="email"
                        required
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="votre@email.com"
                      />
                    </div>
                    <div>
                      <label for="telephone" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="phone" class="w-4 h-4 inline mr-2"></i>Téléphone
                      </label>
                      <input 
                        type="tel" 
                        id="telephone"
                        name="telephone"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="01 23 45 67 89"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label for="entreprise" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="building" class="w-4 h-4 inline mr-2"></i>Entreprise
                      </label>
                      <input 
                        type="text" 
                        id="entreprise"
                        name="entreprise"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="Nom de votre entreprise"
                      />
                    </div>
                    <div>
                      <label for="poste" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="briefcase" class="w-4 h-4 inline mr-2"></i>Poste/Fonction
                      </label>
                      <input 
                        type="text" 
                        id="poste"
                        name="poste"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
                        placeholder="Votre fonction actuelle"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 3: Project Details -->
              <div class="form-step" id="step-3">
                <div class="text-center mb-8">
                  <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="clipboard-list" class="w-8 h-8 text-white"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-900 mb-2 font-accent">Votre projet</h3>
                  <p class="text-gray-600">Décrivez-nous vos besoins et objectifs</p>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <label for="sujet" class="block text-sm font-medium text-gray-700 mb-2">
                      <i data-lucide="tag" class="w-4 h-4 inline mr-2"></i>Sujet de votre demande *
                    </label>
                    <input 
                      type="text" 
                      id="sujet"
                      name="sujet"
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"
                      placeholder="Résumez l'objet de votre demande"
                    />
                  </div>

                  <div>
                    <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
                      <i data-lucide="message-square" class="w-4 h-4 inline mr-2"></i>Description détaillée *
                    </label>
                    <textarea 
                      id="message"
                      name="message"
                      rows="6"
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors resize-none"
                      placeholder="Décrivez en détail votre projet, vos objectifs, votre contexte actuel..."
                    ></textarea>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                      <label for="budget" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="dollar-sign" class="w-4 h-4 inline mr-2"></i>Budget estimé
                      </label>
                      <select 
                        id="budget"
                        name="budget"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"
                      >
                        <option value="">Sélectionnez une fourchette</option>
                        <option value="moins_1000">Moins de 1 000 €</option>
                        <option value="1000_3000">1 000 € - 3 000 €</option>
                        <option value="3000_5000">3 000 € - 5 000 €</option>
                        <option value="5000_10000">5 000 € - 10 000 €</option>
                        <option value="plus_10000">Plus de 10 000 €</option>
                      </select>
                    </div>
                    <div>
                      <label for="echeance" class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="calendar" class="w-4 h-4 inline mr-2"></i>Échéance souhaitée
                      </label>
                      <select 
                        id="echeance"
                        name="echeance"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors"
                      >
                        <option value="">Sélectionnez une échéance</option>
                        <option value="urgent">Urgent (dans la semaine)</option>
                        <option value="1_mois">Dans le mois</option>
                        <option value="3_mois">Dans les 3 mois</option>
                        <option value="6_mois">Dans les 6 mois</option>
                        <option value="plus_6_mois">Plus de 6 mois</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Step 4: Confirmation -->
              <div class="form-step" id="step-4">
                <div class="text-center mb-8">
                  <div class="w-16 h-16 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="check-circle" class="w-8 h-8 text-white"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-gray-900 mb-2 font-accent">Validation</h3>
                  <p class="text-gray-600">Vérifiez vos informations et validez votre demande</p>
                </div>
                
                <div class="space-y-6">
                  <!-- Summary will be populated by JavaScript -->
                  <div id="form-summary" class="bg-gray-50 rounded-xl p-6">
                    <h4 class="font-bold text-gray-900 mb-4">Récapitulatif de votre demande</h4>
                    <div id="summary-content"></div>
                  </div>

                  <div class="space-y-4">
                    <label class="flex items-start space-x-3">
                      <input 
                        type="checkbox" 
                        name="consent_rgpd" 
                        required
                        class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"
                      />
                      <span class="text-sm text-gray-600">
                        J'accepte que mes données personnelles soient utilisées pour traiter ma demande conformément à la 
                        <a href="#" class="text-blue-600 hover:underline">politique de confidentialité</a> *
                      </span>
                    </label>
                    <label class="flex items-start space-x-3">
                      <input 
                        type="checkbox" 
                        name="newsletter" 
                        class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mt-1"
                      />
                      <span class="text-sm text-gray-600">
                        Je souhaite recevoir la newsletter NOVA IMPÉRIA avec actualités et conseils formation
                      </span>
                    </label>
                  </div>
                </div>
              </div>

              <!-- Navigation buttons -->
              <div class="flex justify-between mt-8">
                <button 
                  type="button"
                  id="prev-btn"
                  class="btn btn-ghost"
                  style="display: none;"
                >
                  <i data-lucide="arrow-left" class="w-4 h-4"></i>
                  <span>Précédent</span>
                </button>
                
                <div class="ml-auto">
                  <button 
                    type="button"
                    id="next-btn"
                    class="btn btn-primary"
                  >
                    <span>Suivant</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                  </button>
                  
                  <button 
                    type="submit"
                    id="submit-btn"
                    class="btn btn-gold"
                    style="display: none;"
                  >
                    <i data-lucide="send" class="w-4 h-4"></i>
                    <span>Envoyer ma demande</span>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Informations de contact -->
        <div class="animate-fade-in">
          <h2 class="text-3xl font-bold text-gray-900 mb-6 font-accent">Nos coordonnées</h2>
          <p class="text-gray-600 mb-8">
            Plusieurs moyens pour nous joindre selon vos préférences. 
            Notre équipe est disponible pour répondre à toutes vos questions.
          </p>

          <!-- Moyens de contact -->
          <div class="space-y-4 mb-12">
            {moyensContact.map((contact, index) => (
              <a 
                href={contact.link}
                class="flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-all group card"
                style={`animation-delay: ${index * 100}ms`}
              >
                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                  <i data-lucide={contact.icone} class="w-6 h-6 text-white"></i>
                </div>
                <div class="flex-1">
                  <div class="font-bold text-gray-900 group-hover:text-blue-600 transition-colors">{contact.type}</div>
                  <div class="text-gray-600 text-sm">{contact.description}</div>
                </div>
                <div class="text-gray-900 font-medium">{contact.valeur}</div>
                <i data-lucide="external-link" class="w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors"></i>
              </a>
            ))}
          </div>

          <!-- Horaires -->
          <div class="card p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
              <i data-lucide="clock" class="w-5 h-5 text-blue-600"></i>
              Horaires d'ouverture
            </h3>
            <div class="space-y-3">
              {horaires.map(horaire => (
                <div class="flex justify-between items-center">
                  <span class="text-gray-700">{horaire.jour}</span>
                  <span class="font-medium text-gray-900">{horaire.heures}</span>
                </div>
              ))}
            </div>
          </div>

          <!-- Localisation -->
          <div class="card p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
              <i data-lucide="map-pin" class="w-5 h-5 text-blue-600"></i>
              Notre adresse
            </h3>
            <div class="space-y-2">
              <div class="text-gray-900 font-medium">NOVA IMPÉRIA</div>
              <div class="text-gray-600">123 Avenue des Champs-Élysées</div>
              <div class="text-gray-600">75008 Paris, France</div>
            </div>
            <button class="btn btn-ghost mt-4 w-full">
              <i data-lucide="navigation" class="w-4 h-4"></i>
              <span>Obtenir l'itinéraire</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-20 bg-gray-50">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold text-gray-900 mb-4 font-accent">Questions Fréquentes</h2>
        <p class="text-xl text-gray-600">
          Trouvez rapidement les réponses à vos questions les plus courantes
        </p>
      </div>
      
      <div class="space-y-4">
        {faqItems.map((faq, index) => (
          <div class="card overflow-hidden">
            <button 
              class="faq-button w-full p-6 text-left flex items-center justify-between group"
              data-faq={index}
            >
              <span class="font-medium text-gray-900 group-hover:text-blue-600 transition-colors">{faq.question}</span>
              <i data-lucide="chevron-down" class="w-5 h-5 text-gray-500 transition-transform duration-300"></i>
            </button>
            <div class="faq-answer px-6 pb-6 text-gray-600 hidden">
              {faq.reponse}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <Footer />
</Layout>

<style>
  .form-step {
    display: none;
  }
  
  .form-step.active {
    display: block;
    animation: slideIn 0.3s ease-out;
  }
  
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  .service-card input:checked + .card {
    border-color: rgb(59, 130, 246);
    background: rgb(239, 246, 255);
    transform: scale(1.02);
  }
  
  .animate-blob {
    animation: blob 7s infinite;
  }
  
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  
  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }
</style>

<script>
  // Initialize Lucide icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
  
  // Multi-step form functionality
  let currentStep = 1;
  const totalSteps = 4;
  
  const nextBtn = document.getElementById('next-btn');
  const prevBtn = document.getElementById('prev-btn');
  const submitBtn = document.getElementById('submit-btn');
  const progressBar = document.getElementById('progress-bar');
  const currentStepSpan = document.getElementById('current-step');
  const progressPercent = document.getElementById('progress-percent');
  
  function updateProgress() {
    const progress = (currentStep / totalSteps) * 100;
    progressBar.style.width = `${progress}%`;
    currentStepSpan.textContent = currentStep;
    progressPercent.textContent = Math.round(progress);
  }
  
  function showStep(step) {
    // Hide all steps
    document.querySelectorAll('.form-step').forEach(s => {
      s.classList.remove('active');
    });
    
    // Show current step
    document.getElementById(`step-${step}`).classList.add('active');
    
    // Update navigation buttons
    prevBtn.style.display = step === 1 ? 'none' : 'flex';
    nextBtn.style.display = step === totalSteps ? 'none' : 'flex';
    submitBtn.style.display = step === totalSteps ? 'flex' : 'none';
    
    updateProgress();
  }
  
  function validateStep(step) {
    const currentStepElement = document.getElementById(`step-${step}`);
    const requiredFields = currentStepElement.querySelectorAll('[required]');
    
    for (let field of requiredFields) {
      if (!field.value.trim()) {
        field.focus();
        field.classList.add('border-red-500');
        return false;
      } else {
        field.classList.remove('border-red-500');
      }
    }
    
    return true;
  }
  
  function updateSummary() {
    const formData = new FormData(document.getElementById('multiStepForm'));
    const summaryContent = document.getElementById('summary-content');
    
    let html = '<div class="space-y-3">';
    
    // Service type
    const serviceType = formData.get('service_type');
    if (serviceType) {
      const serviceLabels = {
        'coaching': 'Coaching Individuel',
        'formation': 'Formation',
        'consulting': 'Consulting',
        'autre': 'Autre demande'
      };
      html += `<div><strong>Service :</strong> ${serviceLabels[serviceType]}</div>`;
    }
    
    // Personal info
    const prenom = formData.get('prenom');
    const nom = formData.get('nom');
    if (prenom && nom) {
      html += `<div><strong>Contact :</strong> ${prenom} ${nom}</div>`;
    }
    
    const email = formData.get('email');
    if (email) {
      html += `<div><strong>Email :</strong> ${email}</div>`;
    }
    
    const entreprise = formData.get('entreprise');
    if (entreprise) {
      html += `<div><strong>Entreprise :</strong> ${entreprise}</div>`;
    }
    
    // Project details
    const sujet = formData.get('sujet');
    if (sujet) {
      html += `<div><strong>Sujet :</strong> ${sujet}</div>`;
    }
    
    const budget = formData.get('budget');
    if (budget) {
      const budgetLabels = {
        'moins_1000': 'Moins de 1 000 €',
        '1000_3000': '1 000 € - 3 000 €',
        '3000_5000': '3 000 € - 5 000 €',
        '5000_10000': '5 000 € - 10 000 €',
        'plus_10000': 'Plus de 10 000 €'
      };
      html += `<div><strong>Budget :</strong> ${budgetLabels[budget]}</div>`;
    }
    
    html += '</div>';
    summaryContent.innerHTML = html;
  }
  
  // Event listeners
  nextBtn?.addEventListener('click', () => {
    if (validateStep(currentStep)) {
      currentStep++;
      showStep(currentStep);
      if (currentStep === 4) {
        updateSummary();
      }
    }
  });
  
  prevBtn?.addEventListener('click', () => {
    currentStep--;
    showStep(currentStep);
  });
  
  // Form submission
  document.getElementById('multiStepForm')?.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Show success message
    const form = e.target;
    form.innerHTML = `
      <div class="text-center py-12">
        <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
          <i data-lucide="check-circle" class="w-8 h-8 text-white"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Demande envoyée avec succès !</h3>
        <p class="text-gray-600 mb-6">
          Nous avons bien reçu votre demande. Notre équipe vous recontactera sous 24h maximum.
        </p>
        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
          <p class="text-green-800 font-medium">
            📧 Un email de confirmation vous a été envoyé à votre adresse
          </p>
        </div>
      </div>
    `;
    
    // Re-initialize icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
  
  // FAQ functionality
  document.querySelectorAll('.faq-button').forEach(button => {
    button.addEventListener('click', () => {
      const answer = button.nextElementSibling;
      const icon = button.querySelector('[data-lucide="chevron-down"]');
      
      if (answer.classList.contains('hidden')) {
        answer.classList.remove('hidden');
        icon.style.transform = 'rotate(180deg)';
      } else {
        answer.classList.add('hidden');
        icon.style.transform = 'rotate(0deg)';
      }
    });
  });
  
  // Initialize first step
  showStep(1);
</script>